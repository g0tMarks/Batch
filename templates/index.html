<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BATCH</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- Styles moved to static/styles.css -->
</head>
<body>
    <div class="header-bar">
        <a href="{{ url_for('index') }}" class="batch-link"><span class="logo-full">BATCH</span><span class="logo-mobile">B</span></a>
        <div class="header-spacer"></div>
        <nav class="navbar">
            <div class="nav-buttons">
                {% if session.user %}
                    <a href="{{ url_for('download_template') }}" class="nav-btn{% if request.endpoint == 'download_template' %} active{% endif %}">DOWNLOAD</a>
                    <a href="{{ url_for('upload_page') }}" class="nav-btn{% if request.endpoint == 'upload_page' %} active{% endif %}">UPLOAD</a>
                    <a href="{{ url_for('view_reports') }}" class="nav-btn{% if request.endpoint == 'view_reports' %} active{% endif %}">REPORTS</a>
                    <a href="{{ url_for('logout') }}" class="nav-btn">LOGOUT</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="nav-btn{% if request.endpoint == 'login' %} active{% endif %}">LOGIN</a>
                    <a href="{{ url_for('signup') }}" class="nav-btn{% if request.endpoint == 'signup' %} active{% endif %}">SIGN UP</a>
                {% endif %}
            </div>
        </nav>
        <!-- Mobile hamburger menu -->
        <button class="hamburger-menu" id="hamburger-menu" aria-label="Toggle navigation menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
        <!-- Mobile dropdown menu -->
        <div class="mobile-dropdown" id="mobile-dropdown">
            <div class="dropdown-content">
                {% if session.user %}
                    <a href="{{ url_for('download_template') }}" class="dropdown-item{% if request.endpoint == 'download_template' %} active{% endif %}">DOWNLOAD</a>
                    <a href="{{ url_for('upload_page') }}" class="dropdown-item{% if request.endpoint == 'upload_page' %} active{% endif %}">UPLOAD</a>
                    <a href="{{ url_for('view_reports') }}" class="dropdown-item{% if request.endpoint == 'view_reports' %} active{% endif %}">REPORTS</a>
                    <a href="{{ url_for('logout') }}" class="dropdown-item">LOGOUT</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="dropdown-item{% if request.endpoint == 'login' %} active{% endif %}">LOGIN</a>
                    <a href="{{ url_for('signup') }}" class="dropdown-item{% if request.endpoint == 'signup' %} active{% endif %}">SIGN UP</a>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="centerpiece">
        <h1>Student reports</h1>
        <h2><span id="typewriter-text">simplified</span><span id="cursor">|</span></h2>
        <p class="subheadline">The most painful part of teaching outside of admin? Doing the same task 30 times - with slightly different output. </p>
    </div>
    
    <div class="body-content">
        <div class="text-section">
            <p>Writing reports is like baking 30 unique cookies—one at a time.</p>
            
            <span class="highlight">Not anymore.</span>
            
            <p>Batch is a tool that cuts your report-writing time in half—without sacrificing quality. Simply fill in a spreadsheet with student data and sample reports you have written in the past. Batch does the heavy lifting using AI to combine it all into well-crafted, personalised reports in your writing style.</p>
            <a href="{{ url_for('signup') }}" class="try-it-free-btn">Try It Free</a>
        </div>
        <div class="circles-container" id="circles-container">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
        </div>
    </div>
    
    <script>
        const words = ['simplified', 'streamlined', 'personalised'];
        let currentWordIndex = 0;
        let currentCharIndex = words[0].length; // Start with full first word
        let isDeleting = false;
        const typewriterElement = document.getElementById('typewriter-text');
        
        function typeWriter() {
            const currentWord = words[currentWordIndex];
            
            if (isDeleting) {
                // Delete characters
                currentCharIndex--;
                typewriterElement.textContent = currentWord.substring(0, currentCharIndex);
                
                if (currentCharIndex === 0) {
                    isDeleting = false;
                    currentWordIndex = (currentWordIndex + 1) % words.length;
                    setTimeout(typeWriter, 300); // Pause before typing next word
                    return;
                }
                setTimeout(typeWriter, 50); // Speed of deletion
            } else {
                // Type characters
                typewriterElement.textContent = currentWord.substring(0, currentCharIndex + 1);
                currentCharIndex++;
                
                if (currentCharIndex === currentWord.length) {
                    isDeleting = true;
                    setTimeout(typeWriter, 2000); // Pause before deleting
                    return;
                }
                setTimeout(typeWriter, 100); // Speed of typing
            }
        }
        
        // Start the animation after page load
        window.addEventListener('load', function() {
            // Set initial state to start deleting the first word
            isDeleting = true;
            setTimeout(typeWriter, 2000); // Initial delay before starting to delete
        });

        // Circle animation on scroll
        let circleAnimationTriggered = false;
        
        function animateCircles() {
            if (circleAnimationTriggered) return;
            console.log('Animating circles!');
            const circles = document.querySelectorAll('.circle');
            const delays = [300, 1800, 700, 3200, 1100, 4500, 2300, 900, 3800, 1500, 5100, 2700, 500, 4200, 1900, 3600, 800, 4800, 2100, 1300, 5400, 3000, 600, 4000, 2500, 1700, 5700, 3400, 1000, 4600];
            
            circles.forEach((circle, index) => {
                setTimeout(() => {
                    circle.classList.add('animate');
                }, delays[index]);
            });
            
            // Calculate when the last circle will finish animating
            const maxDelay = Math.max(...delays);
            const animationDuration = 800; // 0.8s animation duration
            const totalTime = maxDelay + animationDuration;
            
            // Start second animation phase after 2 seconds pause
            setTimeout(() => {
                startSecondAnimation();
            }, totalTime + 2000);
            
            circleAnimationTriggered = true;
        }
        
        function startSecondAnimation() {
            const circles = document.querySelectorAll('.circle');
            
            // First, hide all circles quickly
            circles.forEach(circle => {
                circle.style.opacity = '0';
                circle.style.transform = 'scale(0)';
                circle.classList.remove('animate');
            });
            
            // Then make them reappear in order (fast)
            circles.forEach((circle, index) => {
                setTimeout(() => {
                    circle.classList.add('fast-animate');
                }, index * 50); // 50ms delay between each circle
            });
        }
        
        // Intersection Observer to trigger circle animation
        const bodyContent = document.querySelector('.body-content');
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCircles();
                    observer.unobserve(entry.target); // Only trigger once
                }
            });
        }, { threshold: 0.1 }); // Trigger when at least 10% is visible
        observer.observe(bodyContent);

        // Background color transition on scroll
        function toggleBodyBackground() {
            const bodyContent = document.querySelector('.body-content');
            const rect = bodyContent.getBoundingClientRect();
            // Add dark-bg when any part of .body-content is visible in the viewport
            if (rect.top < window.innerHeight && rect.bottom > 0) {
                document.body.classList.add('dark-bg');
            } else {
                document.body.classList.remove('dark-bg');
            }
        }
        window.addEventListener('scroll', toggleBodyBackground);
        window.addEventListener('load', toggleBodyBackground);

        // Mobile hamburger menu functionality
        const hamburgerMenu = document.getElementById('hamburger-menu');
        const mobileDropdown = document.getElementById('mobile-dropdown');
        
        hamburgerMenu.addEventListener('click', function() {
            mobileDropdown.classList.toggle('active');
            hamburgerMenu.classList.toggle('active');
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!hamburgerMenu.contains(event.target) && !mobileDropdown.contains(event.target)) {
                mobileDropdown.classList.remove('active');
                hamburgerMenu.classList.remove('active');
            }
        });
        
        // Close menu when clicking on a dropdown item
        const dropdownItems = document.querySelectorAll('.dropdown-item');
        dropdownItems.forEach(item => {
            item.addEventListener('click', function() {
                mobileDropdown.classList.remove('active');
                hamburgerMenu.classList.remove('active');
            });
        });
    </script>
</body>
</html>
